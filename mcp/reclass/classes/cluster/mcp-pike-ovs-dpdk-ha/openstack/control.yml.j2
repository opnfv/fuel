##############################################################################
# Copyright (c) 2018 Mirantis Inc., Enea AB and others.
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Apache License, Version 2.0
# which accompanies this distribution, and is available at
# http://www.apache.org/licenses/LICENSE-2.0
##############################################################################
---
classes:
  - system.neutron.control.openvswitch.cluster
{%- if conf.MCP_VCP %}
  - cluster.mcp-pike-common-ha.openstack_interface_vcp_biport
  - cluster.mcp-pike-common-ha.openstack_control
  - cluster.mcp-pike-ovs-dpdk-ha.infra
{%- else %}
  - cluster.mcp-pike-common-ha.openstack_control_novcp
  - cluster.mcp-pike-ovs-dpdk-ha
{%- endif %}
parameters:
  neutron:
    server:
      backend:
        tenant_vlan_range: ${_param:neutron_tenant_vlan_range}
{%- if not conf.MCP_VCP %}
  apache:
    server:
      modules:
        # NOTE(armband): We first override mods to ~, then to this to drop ssl
        - rewrite
        - wsgi
{%- endif %}
