##############################################################################
# Copyright (c) 2015 Ericsson AB and others.
# jonas.bjurel@ericsson.com
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Apache License, Version 2.0
# which accompanies this distribution, and is available at
# http://www.apache.org/licenses/LICENSE-2.0
##############################################################################

############################################################################### # Description:
# This .yaml configuration file defines the configuration of the fuel
# deployment and is passed as an argument to deploy.sh
# eg. deploy.sh -c https://artifact.opnfv.org/fuel/config
# This will make build.sh fetch this configuration file and configure the
# deployment accordingly.
# After the deployment, a copy of this file gets uploaded to fuel:
# /root/deploy-config.yaml, as well as the sha-1 sum of this file:
# /root/deploy-config.sha1
##############################################################################

##############################################################################
# deployment configuration meta-data
deployment-scenario-metadata:
   title: Tempest test scenario
   version: 0.0.1
   created: Feb 17 2016
   comment: Test with larger floating IP pool

##############################################################################
# Stack extentions are opnfv added value features in form of a fuel-plugin
# plug-ins listed below will be enabled and configured according to the
# <module-config-base-uri>/<module-config-name>_<module-config-version>.yaml
# It does so by copying the config file to the local plugin config directory
stack-extensions:

##############################################################################
# By editing the override-config sections below, you can override arbitrary
# configuration name-space settings
dea-override-config:
  nodes:
  - id: 1
    interfaces: interfaces_1
    role: controller
    transformations: transformations_1
  - id: 2
    interfaces: interfaces_1
    role: mongo, controller
    transformations: transformations_1
  - id: 3
    interfaces: interfaces_1
    role: ceph-osd,controller
    transformations: transformations_1
  - id: 4
    interfaces: interfaces_1
    role: ceph-osd,compute
    transformations: transformations_1
  - id: 5
    interfaces: interfaces_1
    role: ceph-osd,compute
    transformations: transformations_1
  network:
    networking_parameters:
      base_mac: fa:16:3e:00:00:00
      configuration_template: null
      dns_nameservers:
      - 10.118.32.193
      floating_name: admin_floating_net
      floating_ranges:
      - - 10.118.101.191
        - 10.118.101.254
      gre_id_range:
      - 2
      - 65535
      internal_cidr: 192.168.111.0/24
      internal_gateway: 192.168.111.1
      internal_name: admin_internal_net
      net_l23_provider: ovs
      segmentation_type: tun
      vlan_range:
      - 1000
      - 1030
    networks:
      - cidr: 10.118.101.0/24
        gateway: 10.118.101.1
        ip_ranges:
        - - 10.118.101.180
          - 10.118.101.190
        meta:
          cidr: 172.16.0.0/24
          configurable: true
          floating_range_var: floating_ranges
          ip_range:
          - 172.16.0.2
          - 172.16.0.126
          map_priority: 1
          name: public
          notation: ip_ranges
          render_addr_mask: public
          render_type: null
          use_gateway: true
          vips:
          - haproxy
          - vrouter
          vlan_start: null
        name: public
        vlan_start: 753
      - cidr: 192.168.20.0/24
        gateway: null
        ip_ranges:
        - - 192.168.20.1
          - 192.168.20.254
        meta:
          cidr: 192.168.1.0/24
          configurable: true
          map_priority: 2
          name: storage
          notation: cidr
          render_addr_mask: storage
          render_type: cidr
          use_gateway: false
          vlan_start: 102
        name: storage
        vlan_start: 200
      - cidr: 192.168.10.0/24
        gateway: null
        ip_ranges:
        - - 192.168.10.1
          - 192.168.10.254
        meta:
          cidr: 192.168.0.0/24
          configurable: true
          map_priority: 2
          name: management
          notation: cidr
          render_addr_mask: internal
          render_type: cidr
          use_gateway: false
          vips:
          - haproxy
          - vrouter
          vlan_start: 101
        name: management
        vlan_start: 100
      - cidr: 192.168.30.0/24
        gateway: null
        ip_ranges:
        - - 192.168.30.1
          - 192.168.30.254
        meta:
          cidr: 192.168.2.0/24
          configurable: true
          map_priority: 2
          name: private
          notation: cidr
          render_addr_mask: null
          render_type: cidr
          seg_type: tun
          use_gateway: false
          vlan_start: 103
        name: private
        vlan_start: 300
      - cidr: 10.20.0.0/24
        gateway: 10.20.0.2
        ip_ranges:
        - - 10.20.0.3
          - 10.20.0.254
        meta:
          configurable: false
          map_priority: 0
          notation: ip_ranges
          render_addr_mask: null
          render_type: null
          unmovable: true
          use_gateway: true
        name: fuelweb_admin
        vlan_start: null

   

dha-override-config:
  nodes:
  - id: 1
    libvirtName: controller1
    libvirtTemplate: templates/virtual_environment/vms/controller.xml
  - id: 2
    libvirtName: controller2
    libvirtTemplate: templates/virtual_environment/vms/controller.xml
  - id: 3
    libvirtName: controller3
    libvirtTemplate: templates/virtual_environment/vms/controller.xml
  - id: 4
    libvirtName: compute1
    libvirtTemplate: templates/virtual_environment/vms/compute.xml
  - id: 5
    libvirtName: compute2
    libvirtTemplate: templates/virtual_environment/vms/compute.xml
  - id: 6
    libvirtName: fuel-master
    libvirtTemplate: templates/virtual_environment/vms/fuel.xml
    isFuel: yes
    username: root
    password: r00tme


##############################################################################
# The verification pipeline may populate the section below with arbitrary
# testing information, which post deploy can be retreived from the fuel master:
# /root/deploy-config.yaml
test:
