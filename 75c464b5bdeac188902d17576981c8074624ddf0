{
  "comments": [
    {
      "key": {
        "uuid": "da33351e_043fa226",
        "filename": "mcp/patches/0003-maas-region-force-artifact-download.patch",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 2997
      },
      "writtenOn": "2017-08-10T18:40:59Z",
      "side": 1,
      "message": "This is one big hack. I messed with this for the last couple of days, and forcing an explicit boot image download needs to happen after a certain time (no idea what is the exact condition behind the scenes, but grepping the rackd.log for a DHCP probe followed by a rack (re-)registration seems to be a good test so far; anything earlier than that will either fail, or download only bootloader images?!). This also covers the corner case where MaaS services run into a race condition and DHCP probing cannot be performed the first time.\nI would really love to drop this patch in favor of some better alternative, but I\u0027m out of ideas.",
      "range": {
        "startLine": 25,
        "startChar": 1,
        "endLine": 25,
        "endChar": 25
      },
      "revId": "75c464b5bdeac188902d17576981c8074624ddf0",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da33351e_d8d63ec5",
        "filename": "mcp/patches/0003-maas-region-force-artifact-download.patch",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 4291
      },
      "writtenOn": "2017-08-11T05:57:52Z",
      "side": 1,
      "message": "Even in docs set out that maas.region should be applied several times.",
      "parentUuid": "da33351e_043fa226",
      "range": {
        "startLine": 25,
        "startChar": 1,
        "endLine": 25,
        "endChar": 25
      },
      "revId": "75c464b5bdeac188902d17576981c8074624ddf0",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da33351e_8ebf4cd0",
        "filename": "mcp/patches/0003-maas-region-force-artifact-download.patch",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 2997
      },
      "writtenOn": "2017-08-11T13:28:08Z",
      "side": 1,
      "message": "Yes, and without triggering an explicit sync like above, the time until the second/third/... attempt will work varies. We should come up with a better way to do this later, maybe using the _modules/salt/maas.py custom module (?). For armband, where we need to add another arch to boot-resources, this gets even uglier in the current form ...",
      "parentUuid": "da33351e_d8d63ec5",
      "range": {
        "startLine": 25,
        "startChar": 1,
        "endLine": 25,
        "endChar": 25
      },
      "revId": "75c464b5bdeac188902d17576981c8074624ddf0",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}